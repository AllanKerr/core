<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<meta charset="UTF-8">
		<link rel="stylesheet" href="../../components/demo/styles.css" type="text/css">
		<script src="/node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
		<script type="module">
			import '../../components/demo/demo-page.js';
			import { css, html, LitElement } from 'lit-element/lit-element.js';
			import { ProviderMixin, RequestProviderMixin } from '../provider-mixin.js';

			class InterestingFactProvider extends ProviderMixin(LitElement) {
				constructor() {
					super();

					this.provide('d2l-interesting-fact', () => 'Olives are not the same as fish');
				}

				render() {
					return html`<slot></slot>`;
				}
			}

			class InterestingFactUI extends RequestProviderMixin(LitElement) {
				static get properties() {
					return {
						_interestingFact: { type: String }
					};
				}

				constructor() {
					super();

					const interestingFactProvider = this.requestProvider('d2l-interesting-fact');
					this._interestingFact = interestingFactProvider();
				}

				render() {
					return html`
						<p>Interesting fact from Interesting Fact Provider: ${this._interestingFact}</p>
					`;
				}
			}

			customElements.define('d2l-interesting-fact-provider', InterestingFactProvider);
			customElements.define('d2l-interesting-fact-ui', InterestingFactUI);
		</script>
	</head>
	<body unresolved>
		<d2l-demo-page page-title="provider-mixin">

			<h2>Provider Mixin</h2>

			<d2l-demo-snippet>
				<d2l-interesting-fact-provider>
					<d2l-interesting-fact-ui></d2l-interesting-fact-ui>
				</d2l-interesting-fact-provider>
			</d2l-demo-snippet>

		</d2l-demo-page>
	</body>
</html>
